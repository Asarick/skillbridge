<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillBridge Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
        }

        .sidebar {
            height: 100vh;
            background-color: #343a40;
            color: #fff;
            padding-top: 20px;
        }

        .sidebar a {
            color: #fff;
            text-decoration: none;
            display: block;
            padding: 10px;
            transition: 0.3s;
        }

        .sidebar a:hover {
            background-color: #495057;
        }

        .main-content {
            padding: 20px;
        }

        .card {
            margin-bottom: 20px;
        }

        #notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-2 d-none d-md-block sidebar">
                <div class="position-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" data-section="dashboard">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-section="jobs">
                                <i class="fas fa-briefcase"></i> Jobs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-section="courses">
                                <i class="fas fa-graduation-cap"></i> Courses
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-section="applications">
                                <i class="fas fa-file-alt"></i> Applications
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-section="feedback">
                                <i class="fas fa-comments"></i> Feedback
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <main class="col-md-10 ms-sm-auto px-md-4 main-content">
                <div id="dashboard" class="section">
                    <h2>Dashboard</h2>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Total Jobs</h5>
                                    <p class="card-text" id="totalJobs">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Total Courses</h5>
                                    <p class="card-text" id="totalCourses">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">New Applications</h5>
                                    <p class="card-text" id="newApplications">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Unread Feedback</h5>
                                    <p class="card-text" id="unreadFeedback">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="jobs" class="section" style="display: none;">
                    <h2>Manage Jobs</h2>
                    <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addJobModal">Add New
                        Job</button>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Company</th>
                                <th>Location</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="jobsList">
                            <!-- Jobs will be dynamically added here -->
                        </tbody>
                    </table>
                </div>

                <div id="courses" class="section" style="display: none;">
                    <h2>Manage Courses</h2>
                    <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addCourseModal">Add New
                        Course</button>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Provider</th>
                                <th>Category</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="coursesList">
                            <!-- Courses will be dynamically added here -->
                        </tbody>
                    </table>
                </div>

                <div id="applications" class="section" style="display: none;">
                    <h2>Job Applications</h2>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Applicant Name</th>
                                <th>Job Title</th>
                                <th>Date Applied</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="applicationsList">
                            <!-- Applications will be dynamically added here -->
                        </tbody>
                    </table>
                </div>

                <div id="feedback" class="section" style="display: none;">
                    <h2>User Feedback</h2>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Category</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="feedbackList">
                            <!-- Feedback will be dynamically added here -->
                        </tbody>
                    </table>
                </div>
            </main>
        </div>
    </div>

    <!-- Add Job Modal -->
    <div class="modal fade" id="addJobModal" tabindex="-1" aria-labelledby="addJobModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addJobModalLabel">Add New Job</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addJobForm">
                        <div class="mb-3">
                            <label for="jobTitle" class="form-label">Job Title</label>
                            <input type="text" class="form-control" id="jobTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="company" class="form-label">Company</label>
                            <input type="text" class="form-control" id="company" required>
                        </div>
                        <div class="mb-3">
                            <label for="location" class="form-label">Location</label>
                            <input type="text" class="form-control" id="location" required>
                        </div>
                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" rows="3" required></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveJobBtn">Save Job</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Course Modal -->
    <div class="modal fade" id="addCourseModal" tabindex="-1" aria-labelledby="addCourseModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addCourseModalLabel">Add New Course</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addCourseForm">
                        <div class="mb-3">
                            <label for="courseTitle" class="form-label">Course Title</label>
                            <input type="text" class="form-control" id="courseTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="provider" class="form-label">Provider</label>
                            <input type="text" class="form-control" id="provider" required>
                        </div>
                        <div class="mb-3">
                            <label for="category" class="form-label">Category</label>
                            <select class="form-control" id="category" required>
                                <option value="">Select a category</option>
                                <option value="programming">Programming</option>
                                <option value="design">Design</option>
                                <option value="business">Business</option>
                                <option value="marketing">Marketing</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="courseUrl" class="form-label">Course URL</label>
                            <input type="url" class="form-control" id="courseUrl" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveCourseBtn">Save Course</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Application Modal -->
    <div class="modal fade" id="viewApplicationModal" tabindex="-1" aria-labelledby="viewApplicationModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewApplicationModalLabel">Application Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="applicationDetails">
                    <!-- Application details will be dynamically added here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="approveApplicationBtn">Approve</button>
                    <button type="button" class="btn btn-danger" id="rejectApplicationBtn">Reject</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Feedback Modal -->
    <div class="modal fade" id="viewFeedbackModal" tabindex="-1" aria-labelledby="viewFeedbackModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewFeedbackModalLabel">Feedback Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="feedbackDetails"></div>
                    <form id="replyForm" class="mt-3">
                        <div class="mb-3">
                            <label for="replyMessage" class="form-label">Reply</label>
                            <textarea class="form-control" id="replyMessage" rows="3" required></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="sendReplyBtn">Send Reply</button>
                </div>
            </div>
        </div>
    </div>

    <div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">Notification</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample data (replace with actual data storage/retrieval in a real application)
        let jobs = [];
        let courses = [];
        let applications = [];
        let feedbacks = [];

        document.addEventListener('DOMContentLoaded', function () {
            // Navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelectorAll('.section').forEach(section => {
                        section.style.display = 'none';
                    });
                    document.getElementById(this.dataset.section).style.display = 'block';
                });
            });

            // Add Job
            document.getElementById('saveJobBtn').addEventListener('click', function () {
                const title = document.getElementById('jobTitle').value;
                const company = document.getElementById('company').value;
                const location = document.getElementById('location').value;
                const description = document.getElementById('description').value;

                if (title && company && location && description) {
                    jobs.push({ title, company, location, description });
                    updateJobsList();
                    showNotification('Job added successfully');
                    document.getElementById('addJobForm').reset();
                    bootstrap.Modal.getInstance(document.getElementById('addJobModal')).hide();
                } else {
                    showNotification('Please fill all fields', 'danger');
                }
            });

            // Add Course
            document.getElementById('saveCourseBtn').addEventListener('click', function () {
                const title = document.getElementById('courseTitle').value;
                const provider = document.getElementById('provider').value;
                const category = document.getElementById('category').value;
                const url = document.getElementById('courseUrl').value;

                if (title && provider && category && url) {
                    courses.push({ title, provider, category, url });
                    updateCoursesList();
                    showNotification('Course added successfully');
                    document.getElementById('addCourseForm').reset();
                    bootstrap.Modal.getInstance(document.getElementById('addCourseModal')).hide();
                } else {
                    showNotification('Please fill all fields', 'danger');
                }
            });

            // Update Jobs List
            function updateJobsList() {
                const jobsList = document.getElementById('jobsList');
                jobsList.innerHTML = '';
                jobs.forEach((job, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
            <td>${job.title}</td>
            <td>${job.company}</td>
            <td>${job.location}</td>
            <td>
                <button class="btn btn-sm btn-info view-job" data-index="${index}">View</button>
                <button class="btn btn-sm btn-danger delete-job" data-index="${index}">Delete</button>
            </td>
        `;
                    jobsList.appendChild(row);
                });
                attachJobEventListeners();
                updateDashboardCounts();
            }

            // Update Courses List
            function updateCoursesList() {
                const coursesList = document.getElementById('coursesList');
                coursesList.innerHTML = '';
                courses.forEach((course, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
            <td>${course.title}</td>
            <td>${course.provider}</td>
            <td>${course.category}</td>
            <td>
                <button class="btn btn-sm btn-info view-course" data-index="${index}">View</button>
                <button class="btn btn-sm btn-danger delete-course" data-index="${index}">Delete</button>
            </td>
        `;
                    coursesList.appendChild(row);
                });
                attachCourseEventListeners();
                updateDashboardCounts();
            }

            // Attach Job Event Listeners
            function attachJobEventListeners() {
                document.querySelectorAll('.view-job').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = this.dataset.index;
                        const job = jobs[index];
                        // Implement view job functionality
                        showNotification('View job: ' + job.title);
                    });
                });

                document.querySelectorAll('.delete-job').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = this.dataset.index;
                        jobs.splice(index, 1);
                        updateJobsList();
                        showNotification('Job deleted successfully');
                    });
                });
            }

            // Attach Course Event Listeners
            function attachCourseEventListeners() {
                document.querySelectorAll('.view-course').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = this.dataset.index;
                        const course = courses[index];
                        // Implement view course functionality
                        showNotification('View course: ' + course.title);
                    });
                });

                document.querySelectorAll('.delete-course').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = this.dataset.index;
                        courses.splice(index, 1);
                        updateCoursesList();
                        showNotification('Course deleted successfully');
                    });
                });
            }

            // Update Dashboard Counts
            function updateDashboardCounts() {
                document.getElementById('totalJobs').textContent = jobs.length;
                document.getElementById('totalCourses').textContent = courses.length;
                document.getElementById('newApplications').textContent = applications.length;
                document.getElementById('unreadFeedback').textContent = feedbacks.filter(f => f.status === 'unread').length;
            }

            // Show Notification
            function showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                notification.querySelector('.toast-body').textContent = message;
                notification.classList.remove('bg-success', 'bg-danger');
                notification.classList.add(type === 'success' ? 'bg-success' : 'bg-danger');
                const toast = new bootstrap.Toast(notification);
                toast.show();
            }

            // Initialize
            updateJobsList();
            updateCoursesList();
            updateDashboardCounts();

            // Applications
            function updateApplicationsList() {
                const applicationsList = document.getElementById('applicationsList');
                applicationsList.innerHTML = '';
                applications.forEach((application, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
            <td>${application.name}</td>
            <td>${application.jobTitle}</td>
            <td>${application.dateApplied}</td>
            <td>${application.status}</td>
            <td>
                <button class="btn btn-sm btn-info view-application" data-index="${index}">View</button>
            </td>
        `;
                    applicationsList.appendChild(row);
                });
                attachApplicationEventListeners();
                updateDashboardCounts();
            }

            function attachApplicationEventListeners() {
                document.querySelectorAll('.view-application').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = this.dataset.index;
                        const application = applications[index];
                        showApplicationDetails(application, index);
                    });
                });
            }

            function showApplicationDetails(application, index) {
                const modal = document.getElementById('viewApplicationModal');
                const detailsContainer = document.getElementById('applicationDetails');
                detailsContainer.innerHTML = `
        <p><strong>Name:</strong> ${application.name}</p>
        <p><strong>Job Title:</strong> ${application.jobTitle}</p>
        <p><strong>Date Applied:</strong> ${application.dateApplied}</p>
        <p><strong>Status:</strong> ${application.status}</p>
        <p><strong>Resume:</strong> <a href="${application.resumeUrl}" target="_blank">View Resume</a></p>
        <p><strong>Cover Letter:</strong></p>
        <pre>${application.coverLetter}</pre>
    `;

                document.getElementById('approveApplicationBtn').onclick = () => updateApplicationStatus(index, 'Approved');
                document.getElementById('rejectApplicationBtn').onclick = () => updateApplicationStatus(index, 'Rejected');

                new bootstrap.Modal(modal).show();
            }

            function updateApplicationStatus(index, status) {
                applications[index].status = status;
                updateApplicationsList();
                showNotification(`Application ${status}`);
                bootstrap.Modal.getInstance(document.getElementById('viewApplicationModal')).hide();
            }

            // Feedback
            function updateFeedbackList() {
                const feedbackList = document.getElementById('feedbackList');
                feedbackList.innerHTML = '';
                feedbacks.forEach((feedback, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
            <td>${feedback.user}</td>
            <td>${feedback.category}</td>
            <td>${feedback.date}</td>
            <td>${feedback.status}</td>
            <td>
                <button class="btn btn-sm btn-info view-feedback" data-index="${index}">View</button>
            </td>
        `;
                    feedbackList.appendChild(row);
                });
                attachFeedbackEventListeners();
                updateDashboardCounts();
            }

            function attachFeedbackEventListeners() {
                document.querySelectorAll('.view-feedback').forEach(button => {
                    button.addEventListener('click', function () {
                        const index = this.dataset.index;
                        const feedback = feedbacks[index];
                        showFeedbackDetails(feedback, index);
                    });
                });
            }

            function showFeedbackDetails(feedback, index) {
                const modal = document.getElementById('viewFeedbackModal');
                const detailsContainer = document.getElementById('feedbackDetails');
                detailsContainer.innerHTML = `
        <p><strong>User:</strong> ${feedback.user}</p>
        <p><strong>Category:</strong> ${feedback.category}</p>
        <p><strong>Date:</strong> ${feedback.date}</p>
        <p><strong>Status:</strong> ${feedback.status}</p>
        <p><strong>Message:</strong></p>
        <pre>${feedback.message}</pre>
    `;

                document.getElementById('sendReplyBtn').onclick = () => sendFeedbackReply(index);

                new bootstrap.Modal(modal).show();
            }

            function sendFeedbackReply(index) {
                const replyMessage = document.getElementById('replyMessage').value;
                if (replyMessage) {
                    feedbacks[index].status = 'Replied';
                    feedbacks[index].adminResponse = replyMessage;
                    updateFeedbackList();
                    showNotification('Reply sent successfully');
                    bootstrap.Modal.getInstance(document.getElementById('viewFeedbackModal')).hide();

                    // Send response to contact page
                    window.postMessage({
                        type: 'adminResponse',
                        feedback: feedbacks[index]
                    }, '*');
                } else {
                    showNotification('Please enter a reply message', 'danger');
                }
            }

            function initializeSampleData() {
                jobs = JSON.parse(localStorage.getItem('jobs')) || [
                    { title: 'Software Developer', company: 'Tech Co', location: 'San Francisco, CA', description: 'Exciting opportunity for a skilled developer...' },
                    { title: 'Marketing Specialist', company: 'Brand Inc', location: 'New York, NY', description: 'Join our dynamic marketing team...' }
                ];

                courses = JSON.parse(localStorage.getItem('courses')) || [
                    { title: 'Introduction to Python', provider: 'CodeAcademy', category: 'Programming', url: 'https://example.com/python-course' },
                    { title: 'Digital Marketing Fundamentals', provider: 'Coursera', category: 'Marketing', url: 'https://example.com/marketing-course' }
                ];

                applications = JSON.parse(localStorage.getItem('applications')) || [
                    { name: 'John Doe', jobTitle: 'Software Developer', dateApplied: '2023-07-15', status: 'Pending', resumeUrl: '#', coverLetter: 'Dear Hiring Manager,...' },
                    { name: 'Jane Smith', jobTitle: 'Marketing Specialist', dateApplied: '2023-07-16', status: 'Under Review', resumeUrl: '#', coverLetter: 'To Whom It May Concern,...' }
                ];

                feedbacks = JSON.parse(localStorage.getItem('feedbacks')) || [
                    { user: 'User123', category: 'Course Suggestion', date: '2023-07-14', status: 'Unread', message: 'I would love to see a course on...' },
                    { user: 'User456', category: 'Website Feedback', date: 'Unread', status: 'Read', message: 'The job search feature could be improved by...' }
                ];

                localStorage.setItem('jobs', JSON.stringify(jobs));
                localStorage.setItem('courses', JSON.stringify(courses));
                localStorage.setItem('applications', JSON.stringify(applications));
                localStorage.setItem('feedbacks', JSON.stringify(feedbacks));
            }

            // Initialize
            initializeSampleData();
            updateJobsList();
            updateCoursesList();
            updateApplicationsList();
            updateFeedbackList();
            updateDashboardCounts();

            // Event listener for displaying the dashboard on page load
            document.addEventListener('DOMContentLoaded', function () {
                document.getElementById('dashboard').style.display = 'block';
            });

            document.getElementById('saveCourseBtn').addEventListener('click', function () {
                const title = document.getElementById('courseTitle').value;
                const provider = document.getElementById('provider').value;
                const category = document.getElementById('category').value;
                const url = document.getElementById('courseUrl').value;

                if (title && provider && category && url) {
                    const newCourse = { title, provider, category, url };
                    courses.push(newCourse);
                    updateCoursesList();
                    showNotification('Course added successfully');
                    document.getElementById('addCourseForm').reset();
                    bootstrap.Modal.getInstance(document.getElementById('addCourseModal')).hide();

                    // Send new course to course page
                    window.postMessage({ type: 'newCourse', course: newCourse }, '*');
                } else {
                    showNotification('Please fill all fields', 'danger');
                }
            });

            function addJob() {
                const title = document.getElementById('jobTitle').value;
                const company = document.getElementById('company').value;
                const location = document.getElementById('location').value;
                const description = document.getElementById('description').value;

                if (title && company && location && description) {
                    const newJob = { title, company, location, description, category: 'all' };
                    jobs.push(newJob);
                    updateJobsList();
                    showNotification('Job added successfully');
                    document.getElementById('addJobForm').reset();
                    bootstrap.Modal.getInstance(document.getElementById('addJobModal')).hide();

                    // Send new job to jobs page
                    window.postMessage({ type: 'newJob', job: newJob }, '*');
                } else {
                    showNotification('Please fill all fields', 'danger');
                }
            }

            // Replace the existing 'saveJobBtn' event listener with this:
            document.getElementById('saveJobBtn').addEventListener('click', addJob);
        })
            </script>
    </body>
    
    </html>